@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --radius: 0.75rem;
  --background: #ffffff;
  --foreground: #181821;
  --card: #ffffff;
  --card-foreground: #181821;
  --popover: #ffffff;
  --popover-foreground: #181821;
  --primary: #9333ea;
  --primary-foreground: #fdfcff;
  --secondary: #06b6d4;
  --secondary-foreground: #181821;
  --muted: #f4f3f7;
  --muted-foreground: #71718c;
  --accent: #7c3aed;
  --accent-foreground: #fdfcff;
  --destructive: #dc2626;
  --border: #e6e4ec;
  --input: #e6e4ec;
  --ring: #9333ea;
  --chart-1: #9333ea;
  --chart-2: #06b6d4;
  --chart-3: #7c3aed;
  --chart-4: #ee8e5f;
  --chart-5: #61e9d5;
  --sidebar: #fdfcff;
  --sidebar-foreground: #181821;
  --sidebar-primary: #9333ea;
  --sidebar-primary-foreground: #fdfcff;
  --sidebar-accent: #f4f3f7;
  --sidebar-accent-foreground: #181821;
  --sidebar-border: #e6e4ec;
  --sidebar-ring: #9333ea;
}

.dark {
  --background: #1a1520;
  --foreground: #f4f3f7;
  --card: #181821;
  --card-foreground: #f4f3f7;
  --popover: #181821;
  --popover-foreground: #f4f3f7;
  --primary: #06b6d4;
  --primary-foreground: #181821;
  --secondary: #9333ea;
  --secondary-foreground: #f4f3f7;
  --muted: #2a252e;
  --muted-foreground: #a89fb1;
  --accent: #7c3aed;
  --accent-foreground: #f4f3f7;
  --destructive: #dc2626;
  --border: #2a252e;
  --input: #2a252e;
  --ring: #06b6d4;
  --chart-1: #9333ea;
  --chart-2: #06b6d4;
  --chart-3: #7c3aed;
  --chart-4: #ee8e5f;
  --chart-5: #61e9d5;
  --sidebar: #1a1520;
  --sidebar-foreground: #f4f3f7;
  --sidebar-primary: #06b6d4;
  --sidebar-primary-foreground: #181821;
  --sidebar-accent: #2a252e;
  --sidebar-accent-foreground: #f4f3f7;
  --sidebar-border: #2a252e;
  --sidebar-ring: #06b6d4;
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

/* Toast/Sonner styling improvements */
[data-sonner-toaster] {
  --normal-bg: hsl(var(--popover));
  --normal-border: hsl(var(--border));
  --normal-text: hsl(var(--popover-foreground));
  --toast-bg: hsl(var(--popover));
  --toast-border: hsl(var(--border));
  --toast-text: hsl(var(--popover-foreground));
}

[data-sonner-toast] {
  background: var(--toast-bg) !important;
  border: 1px solid var(--toast-border) !important;
  color: var(--toast-text) !important;
}

[data-sonner-toast] [data-description] {
  color: hsl(var(--muted-foreground)) !important;
  opacity: 0.9 !important;
}

.animate-fade-highlight {
  animation: fade-highlight 3s ease-out 1;
}
@keyframes fade-highlight {
  0% { background-color: yellow !important; }
  80% { background-color: yellow !important; }
  100% { background-color: transparent; }
}

/* 
 * Flagging System: UX Expert Recommendations Applied
 * Subtle hover state for flaggable fields to indicate interactivity
 * without visual clutter. Uses dashed underline as universal web convention.
 * 
 * Note: Components can override these styles with more specific selectors
 */
.flaggable-field:hover {
  text-decoration: underline dashed;
  text-decoration-color: hsl(var(--muted-foreground));
  text-underline-offset: 2px;
  cursor: help;
  transition: text-decoration-color 0.2s ease-in-out;
}

/* Allow components to override flagging hover styles when cursor-default is explicitly set */
.flaggable-field.cursor-default:hover,
.cursor-default .flaggable-field:hover {
  text-decoration: none;
  cursor: default;
}

/* Enhanced hover state for flaggable fields in dark mode */
.dark .flaggable-field:hover {
  text-decoration-color: hsl(var(--muted-foreground) / 0.8);
}

/* Dark mode overrides for cursor-default flaggable fields */
.dark .flaggable-field.cursor-default:hover,
.dark .cursor-default .flaggable-field:hover {
  text-decoration: none;
  cursor: default;
}

/* Ensure flaggable fields don't interfere with existing hover states */
.flaggable-field {
  position: relative;
  display: inline-block;
  border-radius: calc(var(--radius) - 2px);
}

/* Accessibility: Ensure keyboard focus is visible for flaggable elements */
.flaggable-field:focus-visible {
  outline: 2px solid hsl(var(--ring));
  outline-offset: 2px;
}

/* Quirky Design System Animations */
@layer utilities {
  /* Spring animations */
  .animate-spring {
    transition: all 250ms cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .animate-spring-bounce {
    transition: all 300ms cubic-bezier(0.68, -0.55, 0.265, 1.55);
  }
  
  /* Hover scale effects */
  .hover-scale {
    @apply animate-spring;
  }
  
  .hover-scale:hover {
    transform: scale(1.02);
  }
  
  .hover-scale-sm:hover {
    transform: scale(1.01);
  }
  
  /* Glass morphism */
  .glass {
    @apply backdrop-blur-sm bg-white/5 border border-white/10;
  }
  
  .glass-hover {
    @apply glass animate-spring;
  }
  
  .glass-hover:hover {
    @apply bg-white/10 border-white/20;
  }
  
  /* Gradient text - browser compatible */
  .gradient-text {
    background: linear-gradient(135deg, #9333ea, #06b6d4);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
  
  /* Direct gradient backgrounds - browser compatible */
  .bg-gradient-purple-aqua {
    background: linear-gradient(135deg, #9333ea, #06b6d4);
  }
  
  .bg-gradient-page {
    background: linear-gradient(135deg, #ffffff, rgba(147, 51, 234, 0.05), rgba(6, 182, 212, 0.1));
  }
  
  .bg-gradient-card {
    background: linear-gradient(135deg, #ffffff, rgba(250, 249, 254, 0.8));
  }
  
  /* Gradient borders */
  .gradient-border {
    @apply relative;
  }
  
  .gradient-border::before {
    content: '';
    @apply absolute inset-0 rounded-[inherit] p-[2px];
    background: linear-gradient(135deg, hsl(var(--primary)), hsl(var(--secondary)));
    -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
  }
  
  /* Glow effects - browser compatible */
  .glow-purple {
    box-shadow: 0 0 20px rgba(147, 51, 234, 0.2);
  }
  
  .glow-aqua {
    box-shadow: 0 0 20px rgba(6, 182, 212, 0.2);
  }
  
  /* Enhanced shadows - browser compatible */
  .shadow-elevation-1 {
    box-shadow: 
      0 1px 2px rgba(42, 37, 46, 0.05),
      0 1px 3px rgba(42, 37, 46, 0.1);
  }
  
  .shadow-elevation-2 {
    box-shadow: 
      0 3px 6px rgba(42, 37, 46, 0.05),
      0 2px 4px rgba(42, 37, 46, 0.1);
  }
  
  .shadow-elevation-3 {
    box-shadow: 
      0 10px 20px rgba(42, 37, 46, 0.05),
      0 3px 6px rgba(42, 37, 46, 0.1);
  }
  
  .shadow-elevation-4 {
    box-shadow: 
      0 15px 30px rgba(42, 37, 46, 0.05),
      0 5px 10px rgba(42, 37, 46, 0.1);
  }
  
  .shadow-elevation-5 {
    box-shadow: 
      0 25px 50px rgba(42, 37, 46, 0.1),
      0 10px 20px rgba(42, 37, 46, 0.15);
  }
  
  /* Loading skeleton pulse with gradient */
  .skeleton-pulse {
    background: linear-gradient(
      90deg,
      hsl(var(--muted)) 0%,
      rgba(209, 192, 245, 0.2) 50%,
      hsl(var(--muted)) 100%
    );
    background-size: 200% 100%;
    animation: skeleton-pulse 2s ease-in-out infinite;
  }
  
  @keyframes skeleton-pulse {
    0% {
      background-position: 200% 0;
    }
    100% {
      background-position: -200% 0;
    }
  }
  
  /* Quirky focus states */
  .focus-purple:focus {
    @apply ring-2 ring-primary ring-offset-2 ring-offset-background;
  }
  
  .focus-aqua:focus {
    @apply ring-2 ring-secondary ring-offset-2 ring-offset-background;
  }
}

/* Force override button text colors to fix visibility issues */
button[data-slot="button"] {
  color: inherit !important;
}

/* Specific overrides for filter components */
.filter-chip-active {
  color: white !important;
}

.filter-chip-inactive {
  color: #1f2937 !important;
}

.apply-filters-button {
  color: white !important;
}

/* Fix the wrapper div border that's showing as black */
.inventory-table {
  border-color: rgb(147 51 234 / 0.1) !important;
}

/* Override Tailwind's problematic border color defaults globally */
.border-primary\/15 {
  border-color: rgb(147 51 234 / 0.15) !important;
}

.border-primary\/20 {
  border-color: rgb(147 51 234 / 0.20) !important;
}

.border-primary\/10 {
  border-color: rgb(147 51 234 / 0.10) !important;
}

/* Global fix for table row borders to use neutral colors instead of black */
tr[class*="border-b"] {
  border-bottom-color: rgb(229 231 235 / 0.8) !important;
}

/* Specifically target inventory table rows for consistent pale grey borders */
.inventory-table tr {
  border-bottom-color: rgb(229 231 235 / 0.6) !important;
}

/* Fix divide-y borders that appear black in stock item sections */
.divide-y > * + * {
  border-top-color: rgb(229 231 235 / 0.6) !important;
}

/* Specifically target stock item dividers */
.inventory-table .divide-y > * + * {
  border-top-color: rgb(229 231 235 / 0.6) !important;
}

/* Override divide-primary classes */
.divide-primary\/10 > * + * {
  border-top-color: rgb(147 51 234 / 0.10) !important;
}

/* 
 * SKEUMORPHIC DESIGN SYSTEM OVERRIDES
 * Fix CSS cascade issues where base layer overrides component styles
 */

/* Force skeumorphic input styling to override user agent stylesheet */
input[data-slot="input"],
input[data-slot="date-input"] {
  border: 1px solid hsl(var(--input)) !important;
  border-color: hsl(var(--input)) !important;
  background: linear-gradient(135deg, hsl(var(--background)), rgba(250, 249, 254, 0.2)) !important;
  box-shadow: 
    0 1px 2px rgba(42, 37, 46, 0.05),
    0 1px 3px rgba(42, 37, 46, 0.1) !important;
}

input[data-slot="input"]:focus-visible,
input[data-slot="date-input"]:focus-visible {
  border: 1px solid hsl(var(--primary)) !important;
  border-color: hsl(var(--primary)) !important;
  background: linear-gradient(135deg, hsl(var(--background)), rgba(147, 51, 234, 0.05)) !important;
  box-shadow: 
    0 3px 6px rgba(42, 37, 46, 0.05),
    0 2px 4px rgba(42, 37, 46, 0.1),
    0 0 0 2px rgba(147, 51, 234, 0.2) !important;
}

input[data-slot="input"]:hover,
input[data-slot="date-input"]:hover {
  border: 1px solid hsl(var(--secondary)) !important;
  border-color: hsl(var(--secondary)) !important;
  box-shadow: 
    0 3px 6px rgba(42, 37, 46, 0.05),
    0 2px 4px rgba(42, 37, 46, 0.1) !important;
}

/* Force skeumorphic tabs styling */
[role="tablist"] {
  background: linear-gradient(135deg, rgb(244, 243, 247), rgba(250, 249, 254, 0.6)) !important;
  box-shadow: 
    0 3px 6px rgba(42, 37, 46, 0.05),
    0 2px 4px rgba(42, 37, 46, 0.1) !important;
  border: 1px solid rgba(230, 228, 236, 0.4) !important;
  border-radius: 0.75rem !important;
}

[role="tab"] {
  border: none !important;
  background: transparent !important;
}

[role="tab"][data-state="active"] {
  background: linear-gradient(135deg, hsl(var(--background)), rgba(147, 51, 234, 0.1)) !important;
  box-shadow: 
    inset 0 1px 2px rgba(42, 37, 46, 0.1),
    0 1px 2px rgba(147, 51, 234, 0.2) !important;
  border-radius: 0.5rem !important;
}

/* Force skeumorphic table styling */
.border.rounded-lg table,
.border.border-neutral-200\/60.rounded-xl {
  border-color: rgba(230, 228, 236, 0.6) !important;
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.98), rgba(250, 249, 254, 0.3)) !important;
}

/* Fix select/dropdown borders to override user agent stylesheet */
[role="combobox"],
select,
button[role="combobox"] {
  border: 1px solid hsl(var(--input)) !important;
  border-color: hsl(var(--input)) !important;
  background: linear-gradient(135deg, hsl(var(--background)), rgba(250, 249, 254, 0.2)) !important;
  box-shadow: 
    0 1px 2px rgba(42, 37, 46, 0.05),
    0 1px 3px rgba(42, 37, 46, 0.1) !important;
}

[role="combobox"]:focus-visible,
select:focus-visible,
button[role="combobox"]:focus-visible {
  border: 1px solid hsl(var(--primary)) !important;
  border-color: hsl(var(--primary)) !important;
  background: linear-gradient(135deg, hsl(var(--background)), rgba(147, 51, 234, 0.05)) !important;
  box-shadow: 
    0 3px 6px rgba(42, 37, 46, 0.05),
    0 2px 4px rgba(42, 37, 46, 0.1),
    0 0 0 2px rgba(147, 51, 234, 0.2) !important;
}

[role="combobox"]:hover,
select:hover,
button[role="combobox"]:hover {
  border: 1px solid hsl(var(--secondary)) !important;
  border-color: hsl(var(--secondary)) !important;
  box-shadow: 
    0 3px 6px rgba(42, 37, 46, 0.05),
    0 2px 4px rgba(42, 37, 46, 0.1) !important;
}

/* Fix Badge component outline variant borders */
.inline-flex.items-center.rounded-full.border.px-2\.5.py-0\.5 {
  border-color: hsl(var(--input)) !important;
}

/* Specifically target outline badge variant */
div[class*="rounded-full"][class*="border"]:not([class*="border-transparent"]) {
  border-color: hsl(var(--input)) !important;
}

/* Fix date input calendar icon positioning - provide space for icon */
input[data-slot="date-input"],
input[type="date"] {
  position: relative !important;
}

input[data-slot="date-input"]::-webkit-calendar-picker-indicator,
input[type="date"]::-webkit-calendar-picker-indicator {
  display: block !important;
  position: absolute !important;
  right: 12px !important;
  top: 50% !important;
  transform: translateY(-50%) !important;
  width: 16px !important;
  height: 16px !important;
  opacity: 0.7 !important;
  cursor: pointer !important;
  background: transparent !important;
  border: none !important;
  z-index: 1 !important;
}

input[data-slot="date-input"]:hover::-webkit-calendar-picker-indicator,
input[type="date"]:hover::-webkit-calendar-picker-indicator {
  opacity: 1 !important;
}
